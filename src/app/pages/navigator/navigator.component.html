<md-sidenav-container>

  <igo-backdrop
    [shown]="sidenav.opened"
    (click)="sidenav.close()">  
  </igo-backdrop>

  <button
    md-icon-button
    id="igo-menu-button"
    color="primary"
    (click)="sidenav.toggle()">
    <md-icon *ngIf="!sidenav.opened">menu</md-icon>
    <md-icon *ngIf="sidenav.opened">keyboard_arrow_left</md-icon>  
  </button>

  <igo-search-bar
    [tool]="searchTool"
    (key)="sidenav.open()">  
  </igo-search-bar>

  <igo-sidenav #sidenav [opened]="false">
    <igo-flex
      #flex
      igoFlexDirection="column"
      igoFlexInitial="60%"
      igoFlexCollapsed="61px"
      igoFlexExpanded="calc(100% - 60px)">

      <div
        id="igo-upper-panel"
        class="igo-container">

        <div class="igo-content">
          <igo-toolbar
            [tools]="tools"
            *ngIf="!selectedTool">  
          </igo-toolbar>

          <igo-panel
            [title]="selectedTool.title"
            *ngIf="selectedTool">
            <md-icon
              panelLeftIcon
              (click)="goBack()">arrow_back</md-icon> 
            <md-icon
              panelRightIcon
              (click)="goHome()">menu</md-icon>

            <igo-toolbox
              #toolbox
              [tools]="tools"
              [tool]="selectedTool"
              *ngIf="flex.state !== 'collapsed'">
            </igo-toolbox>
          </igo-panel>
        </div>

      </div>

      <div
        igoFlexFill
        id="igo-lower-panel"
        class="igo-container">

        <div
          class="igo-content"
          (click)="flex.collapse()">
        </div>

      </div>

    </igo-flex>
  </igo-sidenav>

  <igo-map
    [options]="context.map"
    [layers]="context.layers">
  </igo-map>

</md-sidenav-container>
