<md-sidenav-container>

  <igo-backdrop
    [shown]="sidenav.opened"
    (click)="sidenav.close()">  
  </igo-backdrop>

  <button
    md-icon-button
    id="igo-menu-button"
    class="igo-primary"
    (click)="sidenav.toggle()">
    <md-icon>
      <ng-container *ngIf="!sidenav.opened">
        menu
      </ng-container>
      <ng-container *ngIf="sidenav.opened">
        keyboard_arrow_left
      </ng-container>
    </md-icon>
  </button>

  <igo-search-bar
    #searchBar
    (key)="sidenav.open()">
  </igo-search-bar>

  <igo-sidenav
    #sidenav
    [opened]="false"
    (open)="searchBar.focus()">

    <igo-flex
      #menu
      direction="column"
      initial="50%"
      collapsed="51px"
      expanded="calc(100% - 51px)"
      [state]="menuState">

      <div
        id="igo-upper-panel"
        class="igo-container">

        <div class="igo-content"  *ngIf="!selectedTool">
          <igo-toolbar>  
          </igo-toolbar>
        </div>

        <igo-panel
          [title]="selectedTool.title"
          *ngIf="selectedTool">

          <button
            md-icon-button
            panelLeftButton
            class="igo-icon-button"
            (click)="goBack()">
            <md-icon>arrow_back</md-icon>
          </button>

          <button
            md-icon-button
            panelRightButton
            class="igo-icon-button"
            (click)="goHome()">
            <md-icon>menu</md-icon>
          </button>

          <igo-toolbox
            *ngIf="menu.state === 'initial' ||
                   menu.state === 'expanded'">
          </igo-toolbox>
        </igo-panel>

      </div>

      <div
        igoFlexFill
        id="igo-lower-panel"
        class="igo-container">

        <igo-panel
          [title]="focusedResult.title"
          *ngIf="focusedResult">
          <button
            md-icon-button
            panelLeftButton
            class="igo-icon-button"
            (click)="resizeMenu()">
            <md-icon>
              <ng-container *ngIf="menu.state === 'initial'">
                arrow_upward
              </ng-container>
              <ng-container *ngIf="menu.state === 'collapsed'">
                arrow_downward
              </ng-container>
              <ng-container *ngIf="menu.state === 'expanded'">
                arrow_upward
              </ng-container>
            </md-icon>
          </button>

          <button
            md-icon-button
            panelRightButton
            class="igo-icon-button"
            *ngIf="media !== 'mobile'">
            <md-icon>open_in_new</md-icon>
          </button>
          <igo-search-result-details
            [result]="focusedResult"
            *ngIf="menu.state === 'initial' ||
                   menu.state === 'collapsed'">
          </igo-search-result-details>
        </igo-panel>
      </div>

    </igo-flex>
  </igo-sidenav>

  <igo-map></igo-map>

</md-sidenav-container>
