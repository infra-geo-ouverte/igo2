

{
    "uri": "_test",
    "base": "_base",

    "message": {
      "title": "Avertissement",
      "text": "Voici un exemple de configuration de filtre attributaire",
      "type": "warning",
      "options": {
        "timeOut": 20000
      }
    },


    "layers": [
      {
        "title": "tes4 buttons",
        "sourceOptions": {
          "type": "wms",
          "url": "https://geoegl.msp.gouv.qc.ca/apis/ws/swtq",
          "queryable": true,
          "params": {
            "layers": "radars_photos"
          },
          "ogcFilters": {
            "enabled": true,
            "editable": false,
            "allowedOperatorsType": "basic",
            "pushButtons": {
              "groups": [
                {"title": "Group 1","ids": ["id1"]}
              ],
              "bundles": [
                {
                  "id": "id1",
                  "logical": "Or",
                  "buttons": [
                    {
                      "title": "<h4>tes</h4>",
                      "enabled": true,
                      "color": "0,0,255",
                      "tooltip": "Here a tooltip explaning ...",
                      "filters": {
                        "operator": "PropertyIsEqualTo",
                        "propertyName": "typeAppareil",
                        "expression": "Radar photo fixe"
                      }
                    },
                    {
                      "title": "Radar photo mobile",
                      "enabled": false,
                      "color": "255,200,0",
                      "tooltip": "Here a tooltip explaning ...",
                      "filters": {
                        "operator": "PropertyIsEqualTo",
                        "propertyName": "typeAppareil",
                        "expression": "Radar photo mobile"
                      }
                    }
                  ]
                }
              ]
            }
          }
        }
      },
      {
        "title": "tes3 filtre non modif",
        "visible" : false,
        "sourceOptions": {
            "crossOrigin": "anonymous",
            "queryFormat": "htmlgml2",
            "queryHtmlTarget": "iframe",
            "url": "/ws/mffpecofor.fcgi",
            "params": {
                "layers": "sh_reg_eco",
                "version": "1.3.0"
            },
            "type": "wms",
            "optionsFromCapabilities": true,

            "ogcFilters": {
              "enabled": true,
              "editable": true,
              "filters": {
                "operator": "PropertyIsEqualTo",
                "propertyName": "zone_veg",
                "expression": "Z2"
              },
              "geometryName": "test geom name"
            },
          "sourceFields": [
            {"name": "reg_eco", "alias": "region ecologique", "values": ["1a", "2b", "2b", "2c", "4F","5g"]},
            {"name": "dom_bio", "alias": "domaine bio-climatique", "values": ["1", "2", "3", "4", "5"]},
            {"name": "szone_veg", "alias": "sous zone végétation ", "values": ["Z21", "Z12"]},
            {"name": "zone_veg", "alias": "zone végétation ", "values": ["Z2", "Z1"]}
          ]
        }
      },
      {
        "title": "tes2 avancé ",
        "visible" : false,
        "sourceOptions": {
            "crossOrigin": "anonymous",
            "queryFormat": "htmlgml2",
            "queryHtmlTarget": "iframe",
            "url": "/ws/mffpecofor.fcgi",
            "params": {
                "layers": "sh_reg_eco",
                "version": "1.3.0"
            },
            "type": "wms",
            "optionsFromCapabilities": true,

            "ogcFilters": {
              "enabled": true,
              "editable": true,
              "allowedOperatorsType": "All"
            },
          "sourceFields": [
            {"name": "reg_eco", "alias": "region eco", "values": ["1a", "2b", "2b", "2c", "4F","5g"]},
            {"name": "dom_bio", "alias": "domaine bio"},
            {"name": "szone_veg", "alias": "sous zone veg ", "values": ["Z21", "z12"], "allowedOperatorsType": "basic"}
          ]
        }
      },

    {
        "title": "filtre group bouton dif:region ecologique",
        "visible" : false,
        "sourceOptions": {
            "crossOrigin": "anonymous",
            "queryFormat": "htmlgml2",
            "queryHtmlTarget": "iframe",
            "url": "/ws/mffpecofor.fcgi",
            "params": {
                "layers": "sh_reg_eco",
                "version": "1.3.0"
            },
            "type": "wms",
            "optionsFromCapabilities": true,

            "ogcFilters": {

              "enabled": true,
              "editable": true,
              "allowedOperatorsType": "*",
              "filtered": true,
              "advancedOgcFilters" : false,
              "geometryName": "test geom name",

            "pushButtons": {
                "groups": [
                    {
                        "title": "filtre valeur ecologique",
                        "name":"1",
                        "ids": ["zone_veg", "dom_bio", "reg_eco"]
                    },
                    {
                        "title": "filtre superficie",
                        "name":"2",
                        "ids": ["sup_km"]
                    }
                ],
                "bundles" : [

                    {
                        "id": "zone_veg",
                        "logical": "Or",

                        "buttons": [
                            {
                                "title": "zone veg = Z1",
                                "enabled": false,
                                "color": "255,0,0",
                                "tooltip": "Here a tooltip explaning ...",
                                "filters": {
                                    "operator": "PropertyIsEqualTo",
                                    "propertyName": "zone_veg",
                                    "expression": "Z1"
                                }
                            },

                            {
                                "title": "zone veg = Z2",
                                "enabled": false,
                                "color": "255,100,255",
                                "tooltip": "Here a tooltip explaning ...",
                                "filters": {
                                    "operator": "PropertyIsEqualTo",
                                    "propertyName": "zone_veg",
                                    "expression": "Z2"
                                }
                            }
                        ]
                    },


                    {
                        "id": "dom_bio",
                        "logical": "Or",
                        "vertical":false,
                        "buttons": [
                            {
                                "title": "Domaine = 1",
                                "enabled": false,
                                "color": "255,0,0",
                                "tooltip": "Here a tooltip explaning ...",
                                "filters": {
                                    "operator": "PropertyIsEqualTo",
                                    "propertyName": "dom_bio",
                                    "expression": "1"
                                }
                            },
                            {
                                "title": "Domaine = 2",
                                "enabled": false,
                                "color": "255,100,255",
                                "tooltip": "Here a tooltip explaning ...",
                                "filters": {
                                    "operator": "PropertyIsEqualTo",
                                    "propertyName": "dom_bio",
                                    "expression": "2"
                                    }
                            },
                            {
                                "title": "Domaine = 3 & 4",
                                "enabled": false,
                                "color": "255,100,255",
                                "tooltip": "Here a tooltip explaning ...",
                                "filters": {
                                    "logical":"Or",
                                    "filters":[
                                        {"operator": "PropertyIsEqualTo","propertyName": "dom_bio", "expression": "3"},
                                        {"operator": "PropertyIsEqualTo","propertyName": "dom_bio", "expression": "4"}
                                    ]
                                }
                            },
                            {
                                "title": "pas 5",
                                "enabled": false,
                                "color": "255,100,255",
                                "tooltip": "Here a tooltip explaning ...",
                                "filters": {
                                    "operator": "PropertyIsNotEqualTo",
                                    "propertyName": "dom_bio",
                                    "expression": "5"
                                    }
                            }
                        ]
                    },
                    {

                        "id": "reg_eco",
                        "logical": "Or",
                        "vertical":false,
                        "buttons": [
                            {
                                "title": "1a",
                                "enabled": false,
                                "color": "255,0,0",
                                "tooltip": "Here a tooltip explaning ...",
                                "filters": {
                                    "operator": "PropertyIsEqualTo",
                                    "propertyName": "reg_eco",
                                    "expression": "1a"
                                }
                            },
                            {
                                "title": "2b",
                                "enabled": false,
                                "color": "255,0,0",
                                "tooltip": "Here a tooltip explaning ...",
                                "filters": {
                                    "operator": "PropertyIsEqualTo",
                                    "propertyName": "reg_eco",
                                    "expression": "2b"
                                }
                            },
                            {
                                "title": "3c",
                                "enabled": false,
                                "color": "255,0,0",
                                "tooltip": "Here a tooltip explaning ...",
                                "filters": {
                                    "operator": "PropertyIsEqualTo",
                                    "propertyName": "reg_eco",
                                    "expression": "3c"
                                }
                            }

                        ]
                    }

                ]
            }
          },
            "sourceFields": [
              {"name": "reg_eco", "alias": "region eco", "values": ["1a", "2b", "2b", "2c", "4F","5g"]},
              {"name": "dom_bio", "alias": "domaine bio", "values": ["1", "2", "3", "4", "5"]},
              {"name": "szone_veg", "alias": "sous zone veg ", "values": ["Z21", "z12"]}
            ]
    }
},
      {
        "title": "Feuillets 20k wfs",
        "zIndex": 11,
        "visible" : false,

        "legendOptions": {
            "collapsed": false,
            "display": true
        },
        "metadata": {
            "extern": true
        },

        "sourceOptions": {
            "type": "wfs",
            "optionsFromCapabilities": true ,
            "crossOrigin": "anonymous",
            "queryHtmlTarget": "iframe",
            "url": "/ws/mffpecofor.fcgi",
            "queryTitle": "fca_no_feu",
            "queryable": true,
            "queryFormat": "gml2",



            "params": {
                "featureTypes": "feuillets_20k",
                "fieldNameGeometry": "geometry",
                "maxFeatures": 100000,
                "version": "2.0.0",
                "outputFormatDownload": "geojson"
            }
        }
    },
    {
        "id":"aire_protec",
        "zIndex": 12,
        "visible" : false,

        "metadata": {
            "extern": true
        },

        "sourceOptions": {

            "crossOrigin": "anonymous",
            "queryFormat": "htmlgml2",
            "queryHtmlTarget": "iframe",
            "url": "https://www.servicesgeo.enviroweb.gouv.qc.ca/donnees/services/Public/Themes_publics/MapServer/WMSServer?",
            "params": {
                "layers": "Ensemble des aires protégées"

            },
            "type": "wms",
            "optionsFromCapabilities": true
        }
    },
    {
        "title" : "sigeon sondage",
        "id":"sigeom - sondage",
        "zIndex": 13,
        "visible" : false,

        "metadata": {
            "extern": true
        },

        "sourceOptions": {

            "crossOrigin": "anonymous",
            "queryFormat": "htmlgml2",
            "queryHtmlTarget": "iframe",
            "url": "https://servicesvectoriels.atlas.gouv.qc.ca/IDS_SGM_WMS/service.svc/get",
            "params": {
                "layers": "SGM:Forages_diamant",
                "version": "1.1.1",
                "SRS": "EPSG:3857"
            },
            "type": "wms",
            "optionsFromCapabilities": true
        }
    },
    {
        "title": "index dif wfs",
        "id":"index_WFS",
        "zIndex": 14,
        "visible" : false,


        "legendOptions": {
            "collapsed": false,
            "display": true
        },
        "metadata": {
            "extern": true
        },

        "sourceOptions": {
            "type": "wfs",
            "optionsFromCapabilities": true ,
            "crossOrigin": "anonymous",
            "queryHtmlTarget": "iframe",
            "url": "/ws/mffpecofor.fcgi",
            "queryTitle": "feuillet",
            "queryable": true,
            "queryFormat": "gml2",

            "style" : {
                "Stroke" : {
                    "color" : "rgba(140, 140, 255, 1.0)",
                    "width" : 3
                }
            },
            "params": {
                "featureTypes": "telecharge_index_250k",
                "fieldNameGeometry": "geometry",
                "maxFeatures": 500,
                "version": "2.0.0",
                "outputFormatDownload": "geojson"
            }
        }
      }
    ],

    "toolbar": [
      "about",
      "searchResults",
      "contextManager",
      "mapTools",
      "catalog",
      "measurer",
      "importExport",
      "shareMap",
      "print",
      "timeFilter",
      "ogcFilter"
    ],

    "tools": [
      {
          "name": "ogcFilter",
          "title": "titre ogcFilter"
      },
      {
          "name": "timeFilter"
      }

    ]

}

